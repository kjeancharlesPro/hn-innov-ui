<div
    class="relative flex min-h-screen w-full flex-col items-center bg-gradient-to-b from-[#1c122b] to-background-dark p-4 sm:p-6"
    >
    <!-- Alerts -->
    <div class="fixed bottom-6 right-6 z-50 max-w-sm space-y-3">
        <div
            *ngIf="success"
            class="w-full p-4 rounded-lg bg-green-500/20 border border-green-500/30 flex items-start gap-4"
        >
            <span
                class="material-symbols-outlined text-2xl text-green-400 mt-0.5"
                >verified</span
            >
            <div class="flex-1">
                <h3 class="font-semibold text-green-300">Message envoyé !</h3>
                <p class="text-sm text-green-300/80 mt-1">
                    Nous avons bien reçu votre message.
                </p>
            </div>
            <button
                (click)="closeAlert('success')"
                class="text-zinc-400 hover:text-white flex-shrink-0"
            >
                <span class="material-symbols-outlined text-base">close</span>
            </button>
        </div>

        <div
            *ngIf="error"
            class="w-full p-4 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-3"
        >
            <span
                class="material-symbols-outlined text-red-400 mt-0.5 flex-shrink-0"
                >error</span
            >
            <div class="flex-1">
                <h3 class="font-semibold text-red-300">Erreur</h3>
                <p class="text-sm text-red-400/80 mt-1">{{ error }}</p>
            </div>
            <button
                (click)="closeAlert('error')"
                class="text-zinc-400 hover:text-white flex-shrink-0"
            >
                <span class="material-symbols-outlined text-base">close</span>
            </button>
        </div>
    </div>

    <!-- Main form -->
    <main class="w-full max-w-md mx-auto flex flex-col items-center">
        <h2
            class="text-white tracking-tight text-3xl font-bold leading-tight text-center pb-2 pt-4"
        >
            Contact
        </h2>
        <p
            class="text-zinc-400 text-base font-normal leading-normal pb-8 text-center"
        >
            Décrivez votre problème ou envoyez-nous un message 
            <a href="mailto:hackathonhn@gmail.com" class="text-accent underline">
                hackathonhn@gmail.com
            </a> 
            .
        </p>

        <form [formGroup]="form" (ngSubmit)="onSubmit()" class="w-full space-y-5">
            <label class="flex flex-col">
                <p class="text-zinc-300 text-sm font-medium pb-2">Sujet</p>
                <input
                    type="text"
                    formControlName="subject"
                    placeholder="Sujet du message"
                    [class.border-red-500]="isFieldInvalid('subject')"
                    [class.ring-red-500/30]="isFieldInvalid('subject')"
                    class="form-input w-full rounded-lg border border-zinc-700 bg-zinc-900/50 p-4 text-white placeholder:text-zinc-500 focus:outline-0 focus:border-accent focus:ring-accent/30"
                    />

                <p *ngIf="isFieldInvalid('subject')" class="text-red-400 text-xs mt-1">
                    Le sujet est requis
                </p>
            </label>

            <label class="flex flex-col">
                <p class="text-zinc-300 text-sm font-medium pb-2">Message</p>
                <textarea
                    formControlName="message"
                    placeholder="Décrivez votre problème ou question"
                    rows="4"
                    [class.border-red-500]="isFieldInvalid('message')"
                    [class.ring-red-500/30]="isFieldInvalid('message')"
                    class="form-textarea w-full rounded-lg border border-zinc-700 bg-zinc-900/50 p-4 text-white placeholder:text-zinc-500 focus:outline-0 focus:border-accent focus:ring-accent/30"
                ></textarea>

                <p *ngIf="isFieldInvalid('message')" class="text-red-400 text-xs mt-1">
                    Le message est requis (minimum 10 caractères)
                </p>

            </label>

            <div class="pt-4">
                <button
                type="submit"
                [disabled]="loading"
                class="w-full bg-secondary h-14 px-6 rounded-lg bg-gradient-to-r from-primary to-accent text-white text-base font-bold shadow-lg shadow-accent/20 transition-transform duration-200 ease-in-out hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
                >
                <span *ngIf="!loading">Soumettre</span>
                <span *ngIf="loading">Envoi en cours...</span>
                <span class="material-symbols-outlined">{{
                    loading ? 'hourglass_top' : 'arrow_forward'
                }}</span>
                </button>
            </div>
        </form>
    </main>
</div>
