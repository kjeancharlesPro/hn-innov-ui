<div
  class="relative flex min-h-screen w-full flex-col items-center bg-gradient-to-b from-[#1c122b] to-background-dark dark group/design-root overflow-x-hidden p-4 sm:p-6"
>
  <!-- Alertes en bas à droite (fixed) -->
  <div class="fixed bottom-6 right-6 z-50 max-w-sm space-y-3">
    <!-- Alerte succès -->
    <div
      *ngIf="success"
      class="w-full p-4 rounded-lg bg-gradient-to-br from-green-500/20 to-emerald-500/20 border border-green-500/30 flex items-start gap-4 shadow-lg shadow-green-500/20 animate-alert-fade-out"
    >
      <span class="material-symbols-outlined text-2xl text-green-400 mt-0.5 flex-shrink-0"
        >verified</span
      >
      <div class="flex-1">
        <h3 class="font-semibold text-green-300">Félicitations !</h3>
        <p class="text-sm text-green-300/80 mt-1">
          Votre inscription au hackathon a été enregistrée avec succès. Vous recevrez bientôt un
          e-mail de confirmation avec les prochaines étapes.
        </p>
      </div>
      <button
        (click)="closeAlert('success')"
        type="button"
        class="text-zinc-400 hover:text-white flex-shrink-0"
      >
        <span class="material-symbols-outlined text-base">close</span>
      </button>
    </div>

    <!-- Alerte erreur -->
    <div
      *ngIf="error"
      class="w-full p-4 rounded-lg bg-red-500/10 border border-red-500/30 flex items-start gap-3 shadow-lg shadow-red-500/20 animate-alert-fade-out"
    >
      <span class="material-symbols-outlined text-red-400 mt-0.5 flex-shrink-0">error</span>
      <div class="flex-1">
        <h3 class="font-semibold text-red-300">
          {{ submitted ? 'Erreur de validation' : 'Erreur' }}
        </h3>
        <p class="text-sm text-red-400/80 mt-1">
          {{ error }}
        </p>
      </div>
      <button
        (click)="closeAlert('error')"
        type="button"
        class="text-zinc-400 hover:text-white flex-shrink-0"
      >
        <span class="material-symbols-outlined text-base">close</span>
      </button>
    </div>
  </div>

  <main class="w-full max-w-md mx-auto flex flex-col items-center">
    <h2 class="text-white tracking-tight text-3xl font-bold leading-tight text-center pb-2 pt-4">
      Inscrivez-vous
    </h2>
    <p class="text-zinc-400 text-base font-normal leading-normal pb-8 text-center">
      Remplissez vos informations pour participer.
    </p>

    <form [formGroup]="form" (ngSubmit)="onSubmit()" class="w-full space-y-5">
      <div class="grid grid-cols-1 sm:grid-cols-2 gap-5">
        <label class="flex flex-col flex-1">
          <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Prénom</p>
          <input formControlName="firstName" [class.border-red-500]="isFieldInvalid('firstName')"
          [class.ring-red-500/30]="isFieldInvalid('firstName')" class="form-input flex w-full
          min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500
          focus:outline-0 border border-zinc-700 bg-zinc-900/50 h-12 px-4 text-base font-normal
          leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30
          transition-colors" placeholder="Entrez votre prénom" />
          <p *ngIf="isFieldInvalid('firstName')" class="text-red-400 text-xs mt-1">
            Le prénom est requis
          </p>
        </label>

        <label class="flex flex-col flex-1">
          <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Nom</p>
          <input formControlName="lastName" [class.border-red-500]="isFieldInvalid('lastName')"
          [class.ring-red-500/30]="isFieldInvalid('lastName')" class="form-input flex w-full min-w-0
          flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500
          focus:outline-0 border border-zinc-700 bg-zinc-900/50 h-12 px-4 text-base font-normal
          leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30
          transition-colors" placeholder="Entrez votre nom" />
          <p *ngIf="isFieldInvalid('lastName')" class="text-red-400 text-xs mt-1">
            Le nom est requis
          </p>
        </label>
      </div>

      <label class="flex flex-col">
        <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Email</p>
        <input formControlName="email" type="email" [class.border-red-500]="isFieldInvalid('email')"
        [class.ring-red-500/30]="isFieldInvalid('email')" class="form-input flex w-full min-w-0
        flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500
        focus:outline-0 border border-zinc-700 bg-zinc-900/50 h-12 px-4 text-base font-normal
        leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30
        transition-colors" placeholder="Entrez votre email" />
        <p *ngIf="isFieldInvalid('email')" class="text-red-400 text-xs mt-1">
          {{ form.get('email')?.hasError('required') ? "L'email est requis" : 'Email invalide' }}
        </p>
      </label>

      <div class="space-y-5">
        <div>
          <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Rôle</p>
          <div class="grid grid-cols-2 gap-3">
            <label
              class="flex items-center p-3 h-12 rounded-lg bg-zinc-900/50 border border-zinc-700 cursor-pointer has-[:checked]:border-accent has-[:checked]:ring-2 has-[:checked]:ring-accent/30"
            >
              <input
                formControlName="role"
                name="role"
                type="radio"
                value="participant"
                class="form-radio"
              />
              <span class="ml-3 text-sm font-medium text-white">Participant</span>
            </label>
            <label
              class="flex items-center p-3 h-12 rounded-lg bg-zinc-900/50 border border-zinc-700 cursor-pointer has-[:checked]:border-accent has-[:checked]:ring-2 has-[:checked]:ring-accent/30"
            >
              <input
                formControlName="role"
                name="role"
                type="radio"
                value="jury"
                class="form-radio"
              />
              <span class="ml-3 text-sm font-medium text-white">Membre du jury</span>
            </label>
          </div>
        </div>

        <!-- Compétences : visible uniquement si participant -->
        <div *ngIf="form.get('role')?.value === 'participant'" class="space-y-5">
          <label class="flex flex-col">
            <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Compétences</p>
            <div class="relative">
              <select
                formControlName="skill"
                class="form-select appearance-none flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500 focus:outline-0 border border-zinc-700 bg-zinc-900/50 h-12 px-4 text-base font-normal leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30 transition-colors"
              >
                <option disabled selected value="">Sélectionnez une compétence</option>
                <option value="Frontend">Frontend</option>
                <option value="Backend">Backend</option>
                <option value="UI/UX Design">UI/UX Design</option>
                <option value="Data Science">Data Science</option>
                <option value="DevOps">DevOps</option>
                <option value="Mobile Development">Mobile Development</option>
              </select>
            </div>
          </label>
        </div>

        <!-- Idée de hackathon : visible uniquement si jury -->
        <div *ngIf="form.get('role')?.value === 'jury'" class="space-y-5">
          <label class="flex flex-col">
            <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">Idée de hackathon</p>
            <input
              formControlName="subject"
              class="form-input flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500 focus:outline-0 border border-zinc-700 bg-zinc-900/50 p-4 text-base font-normal leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30 transition-colors"
              placeholder="Décrivez votre idée en quelques mots..."
            />
          </label>

          <label class="flex flex-col">
            <p class="text-zinc-300 text-sm font-medium leading-normal pb-2">
              Description du sujet
            </p>
            <textarea
              formControlName="description"
              class="form-textarea flex w-full min-w-0 flex-1 resize-none overflow-hidden rounded-lg text-white placeholder:text-zinc-500 focus:outline-0 border border-zinc-700 bg-zinc-900/50 p-4 text-base font-normal leading-normal ring-2 ring-transparent focus:border-accent focus:ring-accent/30 transition-colors"
              placeholder="Détaillez le sujet et les objectifs du hackathon..."
              rows="4"
            ></textarea>
          </label>
        </div>
      </div>

      <div class="pt-4">
        <button
          type="submit"
          [disabled]="loading"
          class="w-full bg-secondary h-14 px-6 rounded-lg bg-gradient-to-r from-primary to-accent text-white text-base font-bold shadow-lg shadow-accent/20 transition-transform duration-200 ease-in-out hover:scale-[1.02] active:scale-[0.98] disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center gap-2"
        >
          <span *ngIf="!loading">Soumettre</span>
          <span *ngIf="loading">Envoi en cours...</span>
          <span class="material-symbols-outlined">{{
            loading ? 'hourglass_top' : 'arrow_forward'
          }}</span>
        </button>
      </div>
    </form>

    <p class="text-center text-zinc-500 text-xs mt-8">
      En vous inscrivant, vous acceptez notre
      <a class="underline hover:text-accent" href="#">Politique de Confidentialité</a> et nos
      <a class="underline hover:text-accent" href="#">Conditions d'Utilisation</a>.
    </p>
  </main>
</div>
